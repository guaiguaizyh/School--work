C51 COMPILER V9.54   1602                                                                  06/25/2024 21:47:20 PAGE 1   


C51 COMPILER V9.54, COMPILATION OF MODULE 1602
OBJECT MODULE PLACED IN .\output\1602.obj
COMPILER INVOKED BY: D:\wpyLearn\chuanganqiapp\C51\BIN\C51.EXE drive\1602.c OPTIMIZE(8,SPEED) BROWSE INCDIR(.\app;.\driv
                    -e) DEBUG OBJECTEXTEND PRINT(.\output\1602.lst) TABS(2) OBJECT(.\output\1602.obj)

line level    source

   1          #include <1602.h>
   2          #define DATA P0
   3          sbit LCDEN=P3^3;
   4          sbit RW=P3^4;
   5          sbit RS=P3^5; 
   6          
   7          u8 DectectBusyBit( )//×´Ì¬ÅÐ¶Ïº¯Êý(Ã¦/ÏÐ?)
   8          {   
   9   1        u8 result;
  10   1        DATA = 0xff;  //¶Á×´Ì¬Ç°ÏÈÖÃ¸ßµçÆ½£¬·ÀÖ¹ÎóÅÐ
  11   1        RS = 0;
  12   1        delay_ms(5);
  13   1          RW = 1;
  14   1        LCDEN = 1;
  15   1        delay_ms(5);
  16   1        result=DATA&0x80; //È¡×î¸ßÎ»¼´ÎªÃ¦±ê¼Ç£¬ÈôLCMÃ¦,Ôò·´¸´²âÊÔ,ÔÚ´Ë´¦Ô­µØÌ¤²½£»µ±LCMÏÐÊ±£¬²ÅÍùÏÂ¼ÌÐø
  17   1        LCDEN = 0;
  18   1        return result;          
  19   1      }   
  20          
  21          void WrComLCD(u8 ComVal)//Ð´ÃüÁîº¯Êý
  22          {
  23   1        while(DectectBusyBit()==1);         //ÏÈ¼ì²âLCMÊÇ·ñ¿ÕÏÐ
  24   1        RS = 0;
  25   1        delay_ms(1);
  26   1          RW = 0;
  27   1        LCDEN = 1;
  28   1        DATA = ComVal;
  29   1        delay_ms(1);
  30   1        LCDEN = 0;  
  31   1      }
  32          
  33          void WrDatLCD(u8 DatVal)//Ð´Êý¾Ýº¯Êý
  34          {
  35   1        while(DectectBusyBit()==1); 
  36   1        RS = 1;
  37   1        delay_ms(1);
  38   1          RW = 0;
  39   1        LCDEN = 1;
  40   1        DATA = DatVal;
  41   1        delay_ms(1);
  42   1        LCDEN = 0;  
  43   1      }
  44          
  45          void LCD1602pos(u8 x,u8 y)//1602ÏÔÊ¾×ø±ê¶¨Î»º¯Êý£ºxÎªÐÐ±ê£¬0£ºµÚÒ»ÐÐ£¬1£ºµÚ¶þÐÐ£»yÎªÁÐ±ê£¬0-15
  46          {
  47   1        u8 t;
  48   1        t=x?0x40:0x00;
  49   1        WrComLCD(0x80+t+y);  
  50   1      }
  51          
  52          void LCD1602_Init( )//1602³õÊ¼»¯º¯Êý
  53          { 
  54   1        WrComLCD(0x38);     // ¹¦ÄÜÉè¶¨:16*2ÐÐ¡¢5*7µãÕó¡¢8Î»Êý¾Ý½Ó¿Ú
C51 COMPILER V9.54   1602                                                                  06/25/2024 21:47:20 PAGE 2   

  55   1        WrComLCD(0x38);
  56   1        WrComLCD(0x38);    
  57   1      //¶à´ÎÖØ¸´Éè¶¨¹¦ÄÜÖ¸Áî,ÒòÎªLCDÆô¶¯ºó²¢²»ÖªµÀÊ¹ÓÃµÄÊÇ4Î»Êý¾Ý½Ó¿Ú»¹ÊÇ8Î»µÄ£¬ËùÒÔ¿ªÊ¼Ê±×ÜÊÇÄ¬ÈÏÎª4Î»£¬ÕâÑù¸Õ¿
             -ªÊ¼Ð´Èë¹¦ÄÜÉè¶¨Ö¸ÁîÊ±£¬µÍ4Î»±»ºöÂÔ,ÎªÁË¿É¿¿£¬×îºÃ¶àÐ´¼¸±é¸ÃÖ¸Áî 
  58   1        WrComLCD(0x01);    // ÇåÆÁ 
  59   1        WrComLCD(0x06);    // ¹â±ê×ÔÔö¡¢ÆÁÄ»²»¶¯  
  60   1        delay_ms(1);     // ÑÓÊ±£¬µÈ´ýÉÏÃæµÄÖ¸ÁîÉúÐ§£¬ÏÂÃæÔÙÏÔÊ¾£¬·ÀÖ¹³öÏÖÂÒÂë
  61   1        WrComLCD(0x0c);    // ¿ªÏÔÊ¾¡¢¹Ø¹â±ê
  62   1        LCD1602pos(0,0);//´ÓµÚÒ»ÐÐµÚÒ»¸ö×Ö·û¿ªÊ¼ÏÔÊ¾
  63   1        delay_ms(5);
  64   1      }
  65          
  66          void LCD1602_disstr(u8 *p,u8 x,u8 y)//´ÓÖ¸¶¨×ø±ê¿ªÊ¼ÏÔÊ¾Ó¢ÎÄ×Ö·û´®£¨³¤¶È²»³¬¹ý32£©£¬×Ô¶¯»»ÐÐ
  67          { 
  68   1        u8 i=0;
  69   1          LCD1602pos(x,y);
  70   1        while(p[i]!='\0')
  71   1        {  
  72   2            WrDatLCD(p[i]);
  73   2          i++;
  74   2          delay_ms(5);
  75   2        
  76   2      //      if(y+i==16)  //Ò»ÐÐÏÔÊ¾µ½Ä©Î²
  77   2      //    {  
  78   2      //        x=x^0x01;//ÇÐ»»µ½ÁíÒ»ÐÐ£¬Èç¹ûµÚ1ÐÐÐ´Íê»»ÐÐµ½µÚ2ÐÐ,Èç¹ûµÚ2ÐÐÐ´Íê»»ÐÐµ½µÚ1ÐÐ
  79   2      //        LCD1602pos(x,0);//ÉèÖÃÏÔÊ¾µØÖ·ÎªÁíÒ»ÐÐÐÐÊ×
  80   2      //    }   
  81   2        } 
  82   1      }
  83          void LCD1602_disch(u8 ch)//ÔÚµ±Ç°Î»ÖÃÏÔÊ¾Ò»¸öÓ¢ÎÄ×Ö·û
  84          { 
  85   1        WrDatLCD(ch);
  86   1        delay_ms(5);  
  87   1      }
  88          void LCD1602_disch_x_y(u8 ch,u8 x,u8 y)//ÔÚÖ¸¶¨Î»ÖÃÏÔÊ¾Ò»¸öÓ¢ÎÄ×Ö·û
  89          { 
  90   1          LCD1602pos(x,y);
  91   1        WrDatLCD(ch);
  92   1        delay_ms(5);  
  93   1      }
  94          void LCD1602_clear( )//1602ÇåÆÁº¯Êý
  95          {
  96   1        WrComLCD(0x01);    // ÇåÆÁ
  97   1      } 
  98          void LCD1602_backspace( )//Ïò×óÉ¾³ýÒ»¸ö×Ö·û
  99          {
 100   1        WrComLCD(0x10);//¹â±ê×óÒÆ
 101   1        WrDatLCD(' ');//Êä³ö¿Õ¸ñ
 102   1        WrComLCD(0x10);//¹â±ê×óÒÆ
 103   1      }
 104          void LCD1602_cursor(u8 direct)//¹â±ê×óÓÒÒÆ¶¯£¬direct=0£¬×óÒÆ£¬direct=1£¬ÓÒÒÆ
 105          {
 106   1        if(direct) WrComLCD(0x14);//¹â±êÓÒÒÆ
 107   1          else     WrComLCD(0x10);//¹â±ê×óÒÆ  
 108   1        
 109   1      }
 110          void LCD1602_screen(u8 direct)//ÆÁÄ»×óÓÒÒÆ¶¯£¬direct=0£¬×óÒÆ£¬direct=1£¬ÓÒÒÆ
 111          {
 112   1        if(direct) WrComLCD(0x1C);//ÆÁÄ»ÓÒÒÆ
 113   1          else     WrComLCD(0x18);//ÆÁÄ»×óÒÆ  
 114   1        
 115   1      }
C51 COMPILER V9.54   1602                                                                  06/25/2024 21:47:20 PAGE 3   



MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    298    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----       9
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
