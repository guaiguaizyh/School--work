C51 COMPILER V9.60.0.0   SHT10                                                             04/23/2024 07:59:29 PAGE 1   


C51 COMPILER V9.60.0.0, COMPILATION OF MODULE SHT10
OBJECT MODULE PLACED IN .\output\sht10.obj
COMPILER INVOKED BY: C:\Keil_v5\C51\BIN\C51.EXE app\sht10.c OPTIMIZE(8,SPEED) BROWSE INCDIR(.\app) DEBUG OBJECTEXTEND PR
                    -INT(.\sht10.lst) TABS(2) OBJECT(.\output\sht10.obj)

line level    source

   1          #include "sht10.h"
   2          
   3          #define NOP5() {_nop_();_nop_();_nop_();_nop_();_nop_();}// Âª∂Êó∂5ÂæÆÂ¶ô
   4          
   5          void Start()//ÂêØÂä®‰º†Ëæì
   6          {
   7   1        SDA = 1;    
   8   1        SCL = 0;    //ÂàùÂßãÁä∂ÊÄÅ
   9   1        _nop_();
  10   1        SCL = 1;    
  11   1        _nop_();
  12   1        SDA = 0;    
  13   1        _nop_();
  14   1        SCL = 0;    
  15   1        NOP5();
  16   1        SCL = 1;     
  17   1          _nop_();
  18   1        SDA = 1;
  19   1        _nop_();
  20   1        SCL = 0;
  21   1      } 
  22          
  23          void Sht10_Reset()//‰º†ÊÑüÂô®Â§ç‰ΩçÔºåÁä∂ÊÄÅÂØÑÂ≠òÂô®ÁöÑÂÄº‰∏çÂèò
  24          { 
  25   1        u8 i;
  26   1        SDA = 1;    
  27   1        SCL = 0;    //ÂàùÂßãÁä∂ÊÄÅ
  28   1        for(i = 0; i < 9; i++)
  29   1        { SCL = 1;
  30   2          SCL = 0;
  31   2        } 
  32   1        Start();//ÂèëÂêØÂä®‰º†Ëæì‰ø°Âè∑
  33   1      }
  34          
  35          u8 WriteByte(u8 SendByte)//ÂÜôÂÖ•‰∏Ä‰∏™Â≠óËäÇÂπ∂ËØªÂèñÂ∫îÁ≠î,ËøîÂõûÂÄº‰∏∫0Ë°®Á§∫Á°ÆËÆ§Ôºå‰∏∫1Ë°®Á§∫Ê≤°ÊúâÁ
             -°ÆËÆ§
  36          {
  37   1        u8 i,error;
  38   1        for(i = 0; i < 8; i++)//Âæ™ÁéØÂÜôÂÖ•8‰ΩçÂëΩ‰ª§ÔºåÂÖàÂÜôÈ´ò‰Ωç
  39   1        {
  40   2            SendByte<<=1;
  41   2            SDA=CY; 
  42   2            SCL = 1;      
  43   2            NOP5();                 
  44   2            SCL = 0;
  45   2         }
  46   1        SDA = 1;//ÈáäÊîæSDAÔºåËÆ©‰º†ÊÑüÂô®ÂèëÂ∫îÁ≠î
  47   1        SCL=1;
  48   1        error=SDA;//SHTÊãâ‰ΩéSDAË°®Á§∫ÊµãÈáèÁªìÊùü
  49   1        SCL=0;
  50   1        return error; 
  51   1      }
  52          
  53          u8 ReadByte(u8 Ack) //ËØªÂèñ‰∏Ä‰∏™Â≠óËäÇÂπ∂ÂèëÈÄÅÂ∫îÁ≠îÔºàAck‰∏∫0Ë°®Á§∫Â∫îÁ≠îÔºå‰∏∫1Ë°®Á§∫‰∏çÂ∫îÁ≠îÔºâÔºåË
C51 COMPILER V9.60.0.0   SHT10                                                             04/23/2024 07:59:29 PAGE 2   

             -øîÂõûÊé•Êî∂Âà∞ÁöÑÂ≠óËäÇ
  54          {
  55   1        u8 i,recbyte=0;
  56   1        SDA=1;//ÈáäÊîæÊÄªÁ∫øÔºåËÆ©‰º†ÊÑüÂô®ÂèëÊï∞ÊçÆ
  57   1        for(i = 0; i < 8; i++)//Âæ™ÁéØÂÜôÂÖ•8‰ΩçÂëΩ‰ª§ÔºåÂÖàÂÜôÈ´ò‰Ωç
  58   1        {
  59   2          SCL=1;
  60   2          NOP5();
  61   2          recbyte=(recbyte<<1)|SDA;
  62   2          SCL = 0;
  63   2         }
  64   1        SDA = Ack;//‰∏ªÊú∫Âêë‰º†ÊÑüÂô®ÂèëÂ∫îÁ≠î
  65   1        SCL=1;
  66   1        NOP5();
  67   1        SCL=0;
  68   1        SDA=1;//ÈáäÊîæÊÄªÁ∫øÔºåËÆ©‰º†ÊÑüÂô®ÁªßÁª≠ÂèëÊï∞ÊçÆ
  69   1        return recbyte; 
  70   1      }
  71          u8 sht10_measure(u8 cmd)//ÊµãÊ∏©ÊπøÂ∫¶ÔºåÊµãÊ∏©Â∫¶ÔºåÂëΩ‰ª§Â≠ó‰∏∫0xF5(TP)ÔºõÊµãÊπøÂ∫¶ÔºåÂëΩ‰ª§Â≠ó‰∏∫0xF3(R
             -H)
  72          {
  73   1        u8 datH,datL;
  74   1        u16 date=0;
  75   1        
  76   1        Sht10_Reset(); //‰º†ÊÑüÂô®ÂàùÂßãÂåñÔºåÈáçÁΩÆËøûÊé•
  77   1        WriteByte(0x1e);//ËΩØ‰ª∂Â§ç‰Ωç‰º†ÊÑüÂô®ÔºåÁä∂ÊÄÅÂØÑÂ≠òÂô®ÁöÑÂÄº‰πüÊ∏ÖÁ©∫ÔºåÂëΩ‰ª§‰∏∫Ôºö00011110
  78   1        
  79   1        Start();//ÂêØÂä®  
  80   1        WriteByte(cmd);//ÂèëÊµãÈáèÂëΩ‰ª§
  81   1        delay_ms(400);//Á≠âÂæÖ‰º†ÊÑüÂô®ÊµãÈáèÂÆåÊàêÔºåÂÆåÊàêÊó∂‰º†ÊÑüÂô®Â∞ÜSDAÊãâ‰Ωé
  82   1        
  83   1        datH=ReadByte(0); //ËØªÁ¨¨‰∏Ä‰∏™Â≠óËäÇÔºàMSBÔºâÂπ∂Â∫îÁ≠î
  84   1        datL=ReadByte(1); //ËØªÁ¨¨‰∫å‰∏™Â≠óËäÇÔºàLSBÔºâÂèëÈùûÂ∫îÁ≠î 
  85   1        date=datH<<8|datL;  //ÁªÑÂêàÊàê14/12‰ΩçÊï∞ÊçÆ
  86   1      
  87   1        if(cmd==TEMP) //Ê∏©Â∫¶ËΩ¨Êç¢ 
  88   1            date=date*0.01-40; 
  89   1        
  90   1        if(cmd==RHUM) //ÊπøÂ∫¶ËΩ¨Êç¢
  91   1        { 
  92   2          date=0.0405*date-(2.8E-6)*date*date-4;  
  93   2          if(date > 100 ) date = 100;
  94   2        }   
  95   1        return  date;
  96   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    364    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----       3
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
