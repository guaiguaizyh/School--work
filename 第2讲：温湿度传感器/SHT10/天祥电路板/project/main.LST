C51 COMPILER V9.00   MAIN                                                                  12/08/2019 17:03:19 PAGE 1   


C51 COMPILER V9.00, COMPILATION OF MODULE MAIN
OBJECT MODULE PLACED IN main.OBJ
COMPILER INVOKED BY: D:\Program Files (x86)\KEIL\C51\BIN\C51.EXE main.c BROWSE DEBUG OBJECTEXTEND

line level    source

   1          //»ùÓÚÌìÏéµçÂ·°å
   2          #include <config.h>
   3          #include <sht10.h> 
   4           
   5          //#include <1602.h> 
   6          //#include <uart.h>     
   7          //#include <led.h>
   8          #include <ST7920.h> 
   9            
  10          
  11          void delay_ms(u16 x)//ºÁÃëÑÓÊ±º¯Êý
  12          {u16 i,j;
  13   1      for(i=0;i<x;i++)
  14   1          for(j=0;j<115;j++);
  15   1      }
  16          
  17          void main()
  18          {       
  19   1              u8  i,j,error=0;
  20   1              u16 Temp;//ÎÂ¶È²âÁ¿Öµ
  21   1              u16 RHum;//Êª¶È²âÁ¿Öµ
  22   1              float VTemp=0;//ÎÂ¶ÈÎïÀíÖµ
  23   1              float VRHum=0;//Êª¶ÈÎïÀíÖµ
  24   1              u8 Check;//Ð£ÑéºÍ
  25   1              u8 print[20],print2[20];
  26   1      
  27   1      //      uart_init(9600); //´®¿Ú³õÊ¼»¯
  28   1      //      LCD1602_Init( );//1602³õÊ¼»¯
  29   1          ST7920_Init();      //12864(st7920)³õÊ¼»¯
  30   1              
  31   1              Sht10_Reset(); //´«¸ÐÆ÷³õÊ¼»¯£¬ÖØÖÃÁ¬½Ó
  32   1              while(1)
  33   1              {       
  34   2                      error=0;
  35   2      
  36   2                      error=Sht10_Measure(&Temp,&Check,0);//²âÁ¿ÎÂ¶È
  37   2                      error+=Sht10_Measure(&RHum,&Check,1);//²âÁ¿Êª¶È
  38   2                       
  39   2                      if(error!=0)  
  40   2                                      Sht10_Reset();//³ö´íÔòÖØÐÂÁ¬½Ó
  41   2                      else{   
  42   3                                      Sht10_Convert(Temp,RHum,&VTemp,&VRHum);//Ã»ÓÐ³ö´íÔò×ª»»ÎªÎïÀíÁ¿
  43   3              
  44   3      //                              sprintf(print,"Temp:%.1f;RHum:%.0f%%",VTemp,VRHum);
  45   3      //                      uart_send_str(print);//Êä³öµ½´®¿Ú
  46   3      //                              LCD1602_disstr(print,0,0);//Êä³öµ½1602Òº¾§ÏÔÊ¾ÆÁ
  47   3      //                              delay_ms(800); //ÑÓÊ±0.8Ãë£¬ÒÔÃâ´«¸ÐÆ÷¹¤×÷¹ýÓÚÆµ·±·¢ÈÈ
  48   3                                      
  49   3                                      //Êä³öµ½6Î»ÊýÂë¹Ü
  50   3      //                              sprintf(print,"%3.0f%3.0f",VTemp,VRHum);
  51   3      //                              for(i=50;i>0;i--) Print_str_LED(print);
  52   3      
  53   3                                      //Êä³öµ½12864
  54   3                                       sprintf(print,"ÎÂ¶È£º%.0f",VTemp);
  55   3                                       i=0;while(i<6){print2[i]=print[i];i++;}
C51 COMPILER V9.00   MAIN                                                                  12/08/2019 17:03:19 PAGE 2   

  56   3                                       j=6;while(print[i]){print2[j]=0xa3;j++;print2[j]=print[i]+0x80;i++;j++;} print2[j]='\0';        //°ë½Ç×ªÈ«½
             -Ç
  57   3                               ST7920_str(print2,0,0); 
  58   3                                       sprintf(print,"Êª¶È£º%.0f",VRHum);
  59   3                                       i=0;while(i<6){print2[i]=print[i];i++;}
  60   3                                       j=6;while(print[i]){print2[j]=0xa3;j++;print2[j]=print[i]+0x80;i++;j++;} print2[j]='\0';        //°ë½Ç×ªÈ«½
             -Ç
  61   3                               ST7920_str(print2,1,0);                                 
  62   3                                       delay_ms(800);   
  63   3                                         
  64   3                      }
  65   2              }
  66   1      }                                                                                                                                


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    359    ----
   CONSTANT SIZE    =     22    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----      55
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
